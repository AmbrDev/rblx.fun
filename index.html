<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>RBLX.Fun</title>

    <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/Cryption/rblx.fun/master/favicon.ico">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.0/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.0/js/materialize.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

    <style>
        .modal {
            max-height: 90%;
        }

        .modal-form-row {
            margin-bottom: 0px;
        }

        .align-price {
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
        }

        .item {
            width: 300px;
            display: inline-block;
            margin: 10px 10px 10px 10px;
        }

        .crate-item {
            width: 134px;
            display: inline-block;
            border-radius: 3px;
            margin: 5px 5px 5px 5px;
        }

        .crate-preview {
            position: absolute;
            bottom: -50px;
            right: -30px;
            width: 75%;
        }

        .spin-open {
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            width: 100%;
            white-space: nowrap;
            position: relative;
            overflow-x: hidden;
            overflow-y: hidden;
        }

        .spin-overlay {
            position: absolute;
            top: 0px;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0px 0px 20px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .spin-items {
            width: 100%;
            height: 100%;
        }

        .divider {
            content: "";
            position: absolute;
            height: 100%;
            left: 50%;
            margin-left: -3px;
            background: rgba(0,255,144,.6);
            width: 6px;
            z-index: 10;
            box-shadow: -1px 1px 8px 1px rgba(50,50,50,.75);
        }

        .item-name {
            text-overflow: ellipsis;
            white-space: nowrap;
            width: 100%;
            overflow: hidden;
        }

        .case-items {
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            width: 100%;
            position: relative;
        }

        .user-items {
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            width: 100%;
            position: relative;
            min-height: 193px;
        }

        .user-item {
            height: 200px;
            display: inline-block;
            border-radius: 3px;
            margin: 5px 5px 5px 5px;
        }

        .winning-numbers {
            content: " ";
        }

        .item-overlay {
            width: unset !important;
            position: absolute !important;
            bottom: 0px !important;
            left: 0px !important;
            top: unset !important;
            right: unset !important;
        }

        .user-info {
            border-left: 1px solid rgba(0, 0, 0, 0.12);
            padding-left: 15px;
        }
    </style>

    <script>
        (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-102963134-1', 'auto');
        ga('send', 'pageview');

    </script>

    <script>
        var tagBody = '(?:[^"\'>]|"[^"]*"|\'[^\']*\')*';

        var tagOrComment = new RegExp(
            '<(?:'
            // Comment body.
            + '!--(?:(?:-*[^->])*--+|-?)'
            // Special "raw text" elements whose content should be elided.
            + '|script\\b' + tagBody + '>[\\s\\S]*?</script\\s*'
            + '|style\\b' + tagBody + '>[\\s\\S]*?</style\\s*'
            // Regular name
            + '|/?[a-z]'
            + tagBody
            + ')>',
            'gi');
        function removeTags(html) {
            var oldHtml;
            do {
                oldHtml = html;
                html = html.replace(tagOrComment, '');
            } while (html !== oldHtml);
            return html.replace(/</g, '&lt;').replace(/"/g, '').replace(/'/g, '').replace(/\\/g, '');
        }
        function htmlToElement(html) {
            var template = document.createElement('template');
            template.innerHTML = html;
            return template.content.firstChild;
        }
    </script>

    <script>
        var cardTemplate = "PGRpdiBjbGFzcz0iY2FyZCBpdGVtIj4KCTxkaXYgY2xhc3M9ImNhcmQtaW1hZ2UiPgoJCTxpbWcgc3JjPSJ7MH0iPgoJCTxzcGFuIGNsYXNzPSJjcmF0ZS1wcmV2aWV3Ij48aW1nIHNyYz0iezN9Ij48L3NwYW4+Cgk8L2Rpdj4KCTxkaXYgY2xhc3M9ImNhcmQtY29udGVudCI+CgkJPHNwYW4gY2xhc3M9ImNhcmQtdGl0bGUiPnsxfTwvc3Bhbj4KCQk8ZGl2IGNsYXNzPSJjb2wgczYiPgoJCQk8c3BhbiBjbGFzcz0iZ3JleS10ZXh0Ij4KCQkJCVByaWNlCgkJCTwvc3Bhbj4KCQk8L2Rpdj4KCQk8ZGl2IGNsYXNzPSJjb2wgczYiPgoJCQk8c3BhbiBjbGFzcz0iZ3JlZW4tdGV4dCBhbGlnbi1wcmljZSI+CgkJCQk8aW1nIHN0eWxlPSJtYXgtaGVpZ2h0OiAyMHB4OyIgc3JjPSIvL3JieC5wbGFjZS9pbWcvZnVuZHMucG5nIiAvPgoJCQkJezJ9CgkJCTwvc3Bhbj4KCQk8L2Rpdj4KCTwvZGl2PgoJPGRpdiBjbGFzcz0iY2FyZC1hY3Rpb24iPgoJCTxzcGFuIGNsYXNzPSJidG4gd2F2ZXMtZWZmZWN0IHdhdmVzLWxpZ2h0IGdyZWVuIiBvbmNsaWNrPSJkaXNwbGF5Q3JhdGVPcGVuZXIodGhpcyk7Ij5PUEVOIENSQVRFPC9zcGFuPgoJPC9kaXY+CjwvZGl2Pg==";
        var itemTemplate = "PGRpdiBjbGFzcz0iY2FyZCBjcmF0ZS1pdGVtIj4KCTxkaXYgY2xhc3M9ImNhcmQtaW1hZ2UiIHN0eWxlPSJib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpIj4KCQk8aW1nIHNyYz0iezB9Ij4KCQl7NH0KCTwvZGl2PgoJPGRpdiBjbGFzcz0iY2FyZC1jb250ZW50IiBzdHlsZT0icGFkZGluZzogNHB4IDRweCA0cHggNHB4Ij4KCQk8cCBjbGFzcz0iaXRlbS1uYW1lIj57MX08L3A+CgkJPHAgY2xhc3M9ImdyZXktdGV4dCI+ezN9PC9wPgoJCTxkaXYgY2xhc3M9ImNvbCBzMTIiPgoJCQk8c3BhbiBjbGFzcz0iZ3JlZW4tdGV4dCBhbGlnbi1wcmljZSI+CgkJCQk8aW1nIHN0eWxlPSJtYXgtaGVpZ2h0OiAyMHB4OyIgc3JjPSIvL3JieC5wbGFjZS9pbWcvZnVuZHMucG5nIiAvPgoJCQkJezJ9CgkJCTwvc3Bhbj4KCQk8L2Rpdj4KCTwvZGl2Pgo8L2Rpdj4=";
        var inveTemplate = "PGRpdiBjbGFzcz0iY2FyZCBob3Jpem9udGFsIHVzZXItaXRlbSI+Cgk8ZGl2IGNsYXNzPSJjYXJkLWltYWdlIj4KCQk8aW1nIHNyYz0iezB9IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgc3R5bGU9IndpZHRoOiAyMDBweCI+CgkJezR9Cgk8L2Rpdj4KCTxkaXYgY2xhc3M9ImNhcmQtc3RhY2tlZCI+CgkJPGRpdiBjbGFzcz0iY2FyZC1jb250ZW50IiBzdHlsZT0icGFkZGluZzogNHB4IDRweCA0cHggNHB4Ij4KCQkJPGg0PnsxfTwvaDQ+CgkJCTxwPjxzcGFuIGNsYXNzPSJncmV5LXRleHQiPlByaWNlOiA8L3NwYW4+CgkJCQk8c3BhbiBjbGFzcz0iZ3JlZW4tdGV4dCBhbGlnbi1wcmljZSI+CgkJCQkJPGltZyBzdHlsZT0ibWF4LWhlaWdodDogMjBweDsiIHNyYz0iLy9yYngucGxhY2UvaW1nL2Z1bmRzLnBuZyIgLz4KCQkJCQl7Mn0KCQkJCTwvc3Bhbj4KCQkJPC9wPgoJCTwvZGl2PgoJCTxkaXYgY2xhc3M9ImNhcmQtYWN0aW9uIj4KCQkJPHNwYW4gY2xhc3M9ImJ0biB3YXZlcy1lZmZlY3Qgd2F2ZXMtbGlnaHQgb3JhbmdlIiBvbmNsaWNrPSIiIGRpc2FibGVkPSJkaXNhYmxlZCI+V0lUSERSQVc8L3NwYW4+CgkJCTxzcGFuIGNsYXNzPSJidG4gd2F2ZXMtZWZmZWN0IHdhdmVzLWxpZ2h0IGdyZWVuIiBvbmNsaWNrPSJjb252ZXJ0VG9Sb2J1eCh0aGlzKTsiPkNPTlZFUlQgVE8gUiQ8L3NwYW4+CgkJPC9kaXY+Cgk8L2Rpdj4KPC9kaXY+";
        var creaTemplate = "PGRpdiBjbGFzcz0iY2FyZCBob3Jpem9udGFsIHVzZXItaXRlbSIgc3R5bGU9ImhlaWdodDogMjUwcHgiPgoJPGRpdiBjbGFzcz0iY2FyZC1pbWFnZSI+CgkJPGltZyBzcmM9InswfSIgd2lkdGg9IjI1MCIgaGVpZ2h0PSIyNTAiIHN0eWxlPSJ3aWR0aDogMjUwcHgiPgoJCXs0fQoJPC9kaXY+Cgk8ZGl2IGNsYXNzPSJjYXJkLXN0YWNrZWQiPgoJCTxkaXYgY2xhc3M9ImNhcmQtY29udGVudCIgc3R5bGU9InBhZGRpbmc6IDRweCA0cHggNHB4IDRweCI+CgkJCTxoND57MX08L2g0PgoJCQk8cD48c3BhbiBjbGFzcz0iZ3JleS10ZXh0Ij5QcmljZTogPC9zcGFuPgoJCQkJPHNwYW4gY2xhc3M9ImdyZWVuLXRleHQgYWxpZ24tcHJpY2UiPgoJCQkJCTxpbWcgc3R5bGU9Im1heC1oZWlnaHQ6IDIwcHg7IiBzcmM9Ii8vcmJ4LnBsYWNlL2ltZy9mdW5kcy5wbmciIC8+CgkJCQkJezJ9CgkJCQk8L3NwYW4+CgkJCTwvcD4KCQkJPGRpdiBjbGFzcz0icm93IG1vZGFsLWZvcm0tcm93Ij4KCQkJCTxkaXYgY2xhc3M9ImlucHV0LWZpZWxkIGNvbCBzMTIiPgoJCQkJCTxpbnB1dCBpZD0ib2RkcyIgdHlwZT0ibnVtYmVyIiBtaW49IjAiIG1heD0iMTAwIiBzdGVwPSIwLjAwMSIgb25jaGFuZ2U9InNldEl0ZW1PZGRzKHRoaXMpOyIgb25rZXl1cD0ic2V0SXRlbU9kZHModGhpcyk7IiB2YWx1ZT0wIGNsYXNzPSJ2YWxpZGF0ZSB2YWxpZCI+CgkJCQkJPGxhYmVsIGZvcj0ib2RkcyIgY2xhc3M9ImFjdGl2ZSI+T2RkczwvbGFiZWw+CgkJCQk8L2Rpdj4KCQkJPC9kaXY+CgkJPC9kaXY+CgkJPGRpdiBjbGFzcz0iY2FyZC1hY3Rpb24iPgoJCQk8c3BhbiBjbGFzcz0iYnRuIHdhdmVzLWVmZmVjdCB3YXZlcy1saWdodCByZWQiIG9uY2xpY2s9InJlbW92ZUNyYXRlSXRlbSh0aGlzKTsiPlJFTU9WRTwvc3Bhbj4KCQkJPHNwYW4gY2xhc3M9ImJ0biB3YXZlcy1lZmZlY3Qgd2F2ZXMtbGlnaHQgZ3JlZW4iIG9uY2xpY2s9InNldFByaW1hcnlJdGVtKHRoaXMpOyI+TUFLRSBQUklNQVJZPC9zcGFuPgoJCTwvZGl2PgoJPC9kaXY+CjwvZGl2Pg==";

        var itemEndPoint = 'https://api.roblox.com/Marketplace/ProductInfo?assetId={0}';
        var thumbnailEndPoint = 'https://www.roblox.com/Thumbs/Asset.ashx?width=420&height=420&assetId={0}';
        var catalogEndPoint = 'https://search.roblox.com/catalog/json?CreatorID={0}&Keyword={1}&ResultsPerPage=1';
        var searchEndPoint = 'https://search.roblox.com/catalog/json?Category=0&Keyword={0}&ResultsPerPage=12&IncludeNotForSale=false&SortType=MostFavorited';
        var giftsEndPoint = 'https://search.roblox.com/catalog/items?Category=11&Direction={1}&IncludeNotForSale=true&Keyword=opened+gift&Subcategory=9&ResultsPerPage=12&PageNumber={0}&PageHash={2}';
        var pageHash = '';

        var invalidItem = {
            img: 'https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png',
            name: 'Unknown Item',
            price: 0,
            overlay: 0
        };

        var itemCache = [];
        var userInventory = [];

        var robuxAmount = 2500;
        var lastRobux = 2500;

        var signedIn = false;

        var overlays = ['', '<img src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/limited.png" class="item-overlay">', '<img src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/limitedunique.png" class="item-overlay">'];

        if (!String.prototype.format) {
            String.prototype.format = function () {
                var args = arguments;
                return this.replace(/{(\d+)}/g, function (match, number) {
                    return typeof args[number] != 'undefined'
                        ? args[number]
                        : match
                        ;
                });
            };
        }

        function shuffle(array) {
            var currentIndex = array.length, temporaryValue, randomIndex;

            // While there remain elements to shuffle...
            while (0 !== currentIndex) {

                // Pick a remaining element...
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                // And swap it with the current element.
                temporaryValue = array[currentIndex];
                array[currentIndex] = array[randomIndex];
                array[randomIndex] = temporaryValue;
            }

            return array;
        }

        function proxy(url, callback) {
            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/GetJson",
                data: JSON.stringify({ url: url }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d == "error") {
                        $.get('//crossorigin.me/' + url, function (data) {
                            callback(data);
                        });
                    } else {
                        callback(JSON.parse(msg.d));
                    }
                },
                error: function () {
                    $.get('//crossorigin.me/' + url, function (data) {
                        callback(data);
                    });
                }
            });
        }

        function getValue(price) {
            return price <= 0 ? "Free" : price.toLocaleString();
        }

        function displayCard(items, img, title, price, preview) {
            var crates = document.getElementById('crates');
            var card = htmlToElement(atob(cardTemplate).format(removeTags(img), removeTags(title), getValue(price), removeTags(preview)));

            card.crateTitle = title;
            card.cratePrice = price;
            card.crateItems = items;

            crates.appendChild(card);
        }

        function getItem(id, callback) {
            for (var i = 0; i < itemCache.length; i++) {
                if (itemCache[i].id == id) {
                    if (itemCache[i].downloaded) {
                        callback(itemCache[i].item);
                        return;
                    } else {
                        itemCache[i].callbacks.push(callback);
                        return;
                    }
                }
            }

            var itemCacheObj = {
                id: id,
                downloaded: false,
                item: invalidItem,
                callbacks: [callback]
            };

            itemCache.push(itemCacheObj);

            proxy(itemEndPoint.format(id), function (data) {
                var responseJson = data;
                var price = 0;

                console.log(responseJson);

                if (!responseJson.IsPublicDomain) {
                    if (responseJson.IsForSale || responseJson.IsLimited || responseJson.IsLimitedUnique) {
                        if (responseJson.IsLimited || responseJson.IsLimitedUnique) {
                            proxy(catalogEndPoint.format(responseJson.Creator.Id, responseJson.Name), function (data) {
                                var listingJson = data[0];

                                if (listingJson.AssetId == responseJson.AssetId) {
                                    itemCacheObj.item = {
                                        img: thumbnailEndPoint.format(id),
                                        name: responseJson.Name,
                                        price: parseInt(listingJson.BestPrice.replace(/,/g, '')),
                                        overlay: responseJson.IsLimitedUnique ? 2 : (responseJson.IsLimited ? 1 : 0)
                                    };
                                    itemCacheObj.downloaded = true;
                                    for (var i = 0; i < itemCacheObj.callbacks.length; i++) {
                                        itemCacheObj.callbacks[i](itemCacheObj.item);
                                    }
                                } else {
                                    itemCacheObj.downloaded = true;
                                    for (var i = 0; i < itemCacheObj.callbacks.length; i++) {
                                        itemCacheObj.callbacks[i](invalidItem);
                                    }
                                }
                            });

                            return;
                        } else {
                            price = responseJson.PriceInRobux;
                        }
                    } else {
                        itemCacheObj.downloaded = true;
                        for (var i = 0; i < itemCacheObj.callbacks.length; i++) {
                            itemCacheObj.callbacks[i](invalidItem);
                        }
                        return;
                    }
                }

                itemCacheObj.downloaded = true;
                itemCacheObj.item = {
                    img: thumbnailEndPoint.format(id),
                    name: responseJson.Name,
                    price: price,
                    overlay: responseJson.IsLimitedUnique ? 2 : (responseJson.IsLimited ? 1 : 0)
                };
                for (var i = 0; i < itemCacheObj.callbacks.length; i++) {
                    itemCacheObj.callbacks[i](itemCacheObj.item);
                }
            });
        }

        function simulatePlay(plays, perDeposit) {
            var pr = document.getElementById('cratePrice').innerHTML;
            var price = pr == "Free" ? 0 : parseInt(pr.replace(/,/g, ''));

            if (perDeposit == true) {
                plays = (plays * 5 * 80) / price;
            }

            console.log("Simulation Start\nTotal User Balance: " + (plays * price) + "R$\nSite Balance: $" + ((plays * price) / 80));

            var spinFrame = document.getElementById('spinFrame');
            var crate = spinFrame.children;

            var profits = 0;
            var losses = 0;
            var userBalance = 0;
            var lowestBalance = 100000;
            var highestBalance = 0;

            var items = spinFrame.items;
            var priceCache = {};

            var lowestWinningNumber = 100000000;
            var highestWinningNumber = 0;

            for (var play = 0; play < plays; play++) {
                var winningNumber = parseInt(Math.random() * spinFrame.winningNumbers);
                var targetItem = "";

                lowestWinningNumber = Math.min(winningNumber, lowestWinningNumber);
                highestWinningNumber = Math.max(winningNumber, highestWinningNumber);
                
                var winningNumbers = 0;
                for (var i = 0; i < items.length; i++) {
                    var item = items[i];
                    var numbersRange = winningNumbers + item.tickets;

                    if (winningNumber >= winningNumbers && winningNumber < numbersRange) {
                        targetItem = item.id;
                        i = items.length;
                    }

                    winningNumbers = numbersRange;
                }

                var itemValue = 0;
                if (typeof (priceCache[targetItem]) == 'undefined') {
                    for (var i = 0; i < crate.length; i++) {
                        if (crate[i].item.id == targetItem) {
                            var vegan = $(crate[i]).find('.align-price').text().trim();
                            itemValue = vegan == "Free" ? 0 : parseInt(vegan.replace(/,/g, ''));
                        }
                    }

                    priceCache[targetItem] = itemValue;
                } else {
                    itemValue = priceCache[targetItem];
                }

                lowestBalance = Math.min(itemValue, lowestBalance);
                highestBalance = Math.max(itemValue, highestBalance);
                userBalance += itemValue;
                losses += (itemValue < price ? 1 : 0);
                profits += (itemValue > price ? 1 : 0);
            }

            console.log("Simulation Complete\n# of Wins: " + profits + "\n# of Losses: " + losses + "\nTotal User Balance: " + userBalance + "\nLowest Balance: " + lowestBalance + "\nHighest Balance: " + highestBalance + "\nAverage Balance: " + (userBalance / plays));
            console.log("Site Revenue: $" + (((plays * price) - userBalance) / 80) + "\nSite Balance: $" + ((plays * price) / 80));
            console.log("Lowest winning number: " + lowestWinningNumber + "\nHighest winning number: " + highestWinningNumber + "\nAverage Profit Per User: " + ((((plays * price) - userBalance) / 80) / plays));
        }

        function openCrate() {
            if (!signedIn) {
                toastr.error("You must be signed in to open crates!");
                return;
            }

            var cp = document.getElementById('cratePrice');
            var price = cp.innerHTML == 'Free' ? 0 : parseInt(cp.innerHTML.replace(/,/g, ''));

            if (robuxAmount < price) {
                toastr.error("Insufficient funds");
                return;
            }

            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/PurchaseCase",
                data: JSON.stringify({ token: localStorage.token, caseId: caseId }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var response = JSON.parse(msg.d);
                    if (typeof (response["error"]) != 'undefined') {
                        toastr.error(response["error"]);
                    } else {
                        robuxAmount -= price;
                        var prize = response.prize;
                        console.log("Winning Number: " + response.winningNumber)

                        toastr.success("Crate successfully purchased");

                        userInventory.push(prize);
                        addInventoryItem(prize.id, prize.price);

                        targetedSpin(prize.id);

                        setTimeout(function () {
                            toastr.info("A new item has been added to your inventory!");
                        }, 10000);
                    }
                },
                error: function () {
                    toastr.error("An error occured while processing this action, please try again later");
                }
            });
        }

        function testSpin() {
            var targetItem = "";
            var spinFrame = document.getElementById('spinFrame');
            var crate = spinFrame.children;

            var winningNumber = parseInt(Math.random() * spinFrame.winningNumbers);

            var winningNumbers = 0;
            var items = spinFrame.items;
            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                var numbersRange = winningNumbers + item.tickets;

                if (winningNumber >= winningNumbers && winningNumber < numbersRange) {
                    targetItem = item.id;
                }

                winningNumbers = numbersRange;
            }

            console.log("New Test Spin!\nWinning Number: " + winningNumber);
            targetedSpin(targetItem);
        }

        function targetedSpin(targetItem) {
            var spinFrame = document.getElementById('spinFrame');
            var crate = spinFrame.children;

            var audio = new Audio('https://raw.githubusercontent.com/Cryption/rblx.fun/master/tick.wav');
            var prize = new Audio('https://github.com/Cryption/rblx.fun/blob/master/prize.mp3?raw=true');

            var targetIndex = crate.length - parseInt(Math.random() * crate.length * 0.3);
            for (var i = targetIndex - 1; i >= 0; i--) {
                if (crate[i].item.id == targetItem) {
                    targetIndex = i;
                    break;
                }
            }

            var targetX = (spinFrame.clientWidth / 2) - (crate[targetIndex].offsetLeft + (Math.random() * crate[targetIndex].clientWidth));
            var x = 0;
            var maxSpeed = 70;
            if (typeof (currentSpin) != 'undefined')
                clearInterval(currentSpin);

            currentSpin = setInterval(function () {
                if (parseInt((x + (crate[targetIndex].clientWidth / 2)) / crate[targetIndex].clientWidth) < parseInt((x + Math.min(maxSpeed, (-targetX - x) * .006) + (crate[targetIndex].clientWidth / 2)) / crate[targetIndex].clientWidth)) {
                    audio.play();
                }

                if ((-targetX - x) <= 2) {
                    x = -targetX;
                    prize.play();

                    clearInterval(currentSpin);
                }

                x += Math.min(maxSpeed, (-targetX - x) * .006);

                spinFrame.style.webkitTransform = "translateX(" + -x + "px)";
                spinFrame.style.transform = "translateX(" + -x + "px)";
                spinFrame.style.msTransform = "translateX(" + -x + "px)";
            }, 15);

            return targetItem;
        }

        function recalculateCratePrice() {
            var spinFrame = document.getElementById('spinFrame');
            var crate = spinFrame.children;

            var items = spinFrame.items;
            var calculatedPrice = 0;

            if (typeof (items) == 'undefined')
                return;

            for (var j = 0; j < items.length; j++) {
                var targetItem = items[j].id;
                var hasItem = false;
                for (var i = 0; i < crate.length; i++) {
                    if (crate[i].item.id == targetItem && !hasItem) {
                        var vegan = $(crate[i]).find('.align-price').text().trim();
                        if (vegan == "Loading...")
                            return;

                        var itemValue = vegan == "Free" ? 0 : parseInt(vegan.replace(/,/g, ''));

                        calculatedPrice += ((itemValue) * (items[j].tickets / 100000.0));
                        hasItem = true;
                    }
                }
            }

            document.getElementById('cratePrice').innerHTML = getValue(Math.ceil(calculatedPrice * 1.15));
        }

        function displayCrateOpener(btn) {
            var items = btn.parentElement.parentElement.crateItems;

            if (typeof (currentSpin) != 'undefined')
                clearInterval(currentSpin);

            document.getElementById('crateTitle').innerHTML = removeTags(btn.parentElement.parentElement.crateTitle);
            document.getElementById('cratePrice').innerHTML = getValue(btn.parentElement.parentElement.cratePrice);
            document.getElementById('winningNumbersCheckbox').checked = false;
            document.getElementById('spinFrame').innerHTML = "";
            document.getElementById('caseInventory').innerHTML = "";
            var crateItems = [];
            for (var i = 0; i < Math.max(items.length * 50, 250); i++) {
                crateItems.push(items[i % items.length]);
            }
            crateItems = shuffle(crateItems);
            
            for (var i = 0; i < crateItems.length; i++) {
                var item = crateItems[i];
                var itemCard = htmlToElement(atob(itemTemplate).format('https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png', 'Loading', 'Loading...', '', ''));
                (function (itemCard) {
                    getItem(item.id, function (listing) {
                        itemCard.innerHTML = htmlToElement(atob(itemTemplate).format(removeTags(listing.img), removeTags(listing.name), getValue(item.price), '', overlays[listing.overlay])).innerHTML;
                        //recalculateCratePrice();
                    });
                })(itemCard);
                itemCard.item = item;
                document.getElementById('spinFrame').appendChild(itemCard);
            }

            var winningNumbers = 0;
            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                var itemCard = htmlToElement(atob(itemTemplate).format('https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png', 'Loading', 'Loading...', '', ''));
                (function (itemCard, winningNumbers, item) {
                    getItem(item.id, function (listing) {
                        itemCard.innerHTML = htmlToElement(atob(itemTemplate).format(removeTags(listing.img), removeTags(listing.name), getValue(item.price), '<span class="winning-numbers" ' + (document.getElementById('winningNumbersCheckbox').checked ? '' : 'style="display: none"') + '>' + winningNumbers + ' - ' + (winningNumbers + item.tickets) + '</span>', overlays[listing.overlay])).innerHTML;
                    });
                })(itemCard, winningNumbers, item);
                winningNumbers += item.tickets;
                document.getElementById('caseInventory').appendChild(itemCard);
            }
            document.getElementById('spinFrame').winningNumbers = winningNumbers;
            document.getElementById('spinFrame').items = items;

            $(".winning-numbers").hide();
            $('#open-crate').modal('open');
        }

        function addInventoryItem(id, price) {
            var itemCard = htmlToElement(atob(inveTemplate).format('https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png', 'Loading', getValue(price), '', ''));
            (function (itemCard) {
                getItem(id, function (listing) {
                    itemCard.innerHTML = htmlToElement(atob(inveTemplate).format(removeTags(listing.img), removeTags(listing.name), getValue(price), '', overlays[listing.overlay])).innerHTML;
                    itemCard.item = listing;
                });
            })(itemCard);
            document.getElementById('inventoryDiv').appendChild(itemCard);
        }
        
        function convertToRobux(btn) {
            var item = btn.parentElement.parentElement.parentElement;

            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/ConvertToRobux",
                data: JSON.stringify({ token: localStorage.token, id: item.item.id }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var response = JSON.parse(msg.d);
                    if (typeof (response["error"]) != 'undefined') {
                        toastr.error(response["error"]);
                    } else {
                        toastr.success(response["success"]);

                        robuxAmount += item.item.price;
                        $(item).hide(250);
                    }
                },
                error: function () {
                    toastr.error("An error occured while processing this action, please try again later");
                }
            });
        }

        function convertAllToRobux() {
            userInventory = [];
            var inv = document.getElementById('inventoryDiv').children;
            for (var i = 0; i < inv.length; i++) {
                $.ajax({
                    type: "POST",
                    url: "//api.rblx.fun/Default.aspx/ConvertToRobux",
                    data: JSON.stringify({ token: localStorage.token, id: inv[i].item.id }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        var response = JSON.parse(msg.d);
                        if (typeof (response["error"]) != 'undefined') {
                            toastr.error(response["error"]);
                        } else {
                            toastr.success(response["success"]);

                            robuxAmount += inv[i].item.price;
                            $(inv[i]).hide(250);
                        }
                    },
                    error: function () {
                        toastr.error("An error occured while processing this action, please try again later");
                    }
                });
            }
        }

        function openInventory() {
            $('#inventory').modal('open');
        }

        function createCrate() {
            var sum = 0;
            var price = 0;

            var smallestOdd = 100;

            $("[id='odds']").each(function (i, n) {
                sum += parseFloat($(n).val(), 10);
                smallestOdd = Math.min(smallestOdd, parseFloat($(n).val(), 10));
                var val = n.parentElement.parentElement.parentElement.children[1].children[1].innerText.replace(/,/g, '');
                price += ((val == "Free" ? 0 : parseFloat(val)) * (parseFloat($(n).val(), 10) / 100.0));
            });

            price = Math.ceil(price * 1.15);

            var crate = {
                img: document.getElementById('cratePreviewIcon').src,
                title: document.getElementById('caseName').value,
                price: price,
                preview: document.getElementById('cratePreviewPreview').src,
                items: []
            };

            var crateItems = document.getElementById('creatorDiv').children;
            for (var i = 0; i < crateItems.length; i++) {
                var val = $(crateItems[i]).find('.align-price').text().trim().replace(/,/g, '')
                crate.items.push({
                    id: crateItems[i].id,
                    tickets: Math.round(parseFloat($(crateItems[i]).find('#odds').val()) / 0.001),
                    price: (val == "Free" ? 0 : parseFloat(val))
                    });
            }

            if (document.getElementById('caseName').value == "") {
                toastr.error("You must enter a crate name!");
            } else if (sum != 100) {
                toastr.error("The total odds must be 100%!");
            } else if (smallestOdd < 0.001) {
                toastr.error("The odds for any item cannot be less than 0.001!");
            } else {
                console.log("New Crate!\nJSON: " + JSON.stringify(crate) + "\n\nBase64: " + btoa(JSON.stringify(crate)));

                $.ajax({
                    type: "POST",
                    url: "//api.rblx.fun/Default.aspx/CreateCase",
                    data: JSON.stringify({ token: localStorage.token, title: crate.title, icon: crate.icon, preview: crate.preview, items: crate.items }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        var response = JSON.parse(msg.d);
                        if (typeof (response["error"]) != 'undefined') {
                            toastr.error(response["error"]);
                        } else {
                            toastr.success("Crate created!");

                            var newurl = window.location.protocol + '//rblx.fun/?crate=' + response.success;
                            window.history.pushState({ path: newurl }, '', newurl);

                            $('#crate-creator').modal('close');
                            displayCard(crate.items, crate.img, crate.title, crate.price, crate.preview);
                        }
                    },
                    error: function () {
                        toastr.error("An error occured while processing this action, please try again later");
                    }
                });
            }
        }

        function getCrates(page) {
            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/GetCases",
                data: JSON.stringify({ page: page }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var response = JSON.parse(msg.d);
                    if (typeof (response["error"]) != 'undefined') {
                        toastr.error(response["error"]);
                    } else {
                        for (var i = 0; i < response.length; i++) {
                            var crate = response[i];

                            var cratePrice = 0;
                            for (var j = 0; j < crate.items.length; j++) {
                                var item = crate.items[j];
                                cratePrice += item.price * (item.tickets / 100000);
                            }
                            cratePrice = Math.ceil(cratePrice * 1.15);

                            displayCard(crate.items, crate.img, crate.title, cratePrice, crate.preview);
                        }
                    }
                },
                error: function () {
                    toastr.error("An error occured while processing this action, please try again later");
                }
            });
        }

        function setItemOdds(btn) {
            var sum = 0;
            var price = 0;

            $("[id='odds']").each(function (i, n) {
                sum += parseFloat($(n).val(), 10);
                var val = n.parentElement.parentElement.parentElement.children[1].children[1].innerText.replace(/,/g, '');
                price += ((val == "Free" ? 0 : parseFloat(val)) * (parseFloat($(n).val(), 10) / 100.0));
            });

            price = Math.ceil(price * 1.15);

            document.getElementById('oddsSum').innerHTML = sum;
            document.getElementById('calculatedPrice').innerHTML = getValue(price);
            document.getElementById('cratePreviewPrice').innerHTML = getValue(price);
        }

        function setPrimaryItem(btn) {
            document.getElementById('cratePreviewPreview').src = btn.parentElement.parentElement.parentElement.children[0].children[0].src;
        }

        function removeCrateItem(btn) {
            var card = btn.parentElement.parentElement.parentElement;
            card.parentElement.removeChild(card);

            setItemOdds(btn);
        }

        function setGiftsPage(page, direction) {
            if (page < 0) {
                page = 0;
                return;
            }

            document.getElementById('pageNumber').innerHTML = (page + 1);
            document.getElementById('gifts').innerHTML = "";
            
            document.getElementById('nextPage').setAttribute('disabled', 'disabled');
            document.getElementById('prevPage').setAttribute('disabled', 'disabled');

            setTimeout(function () {
                proxy(giftsEndPoint.format(page, direction, pageHash), function (data) {
                    pageHash = data.PageHash;

                    document.getElementById('nextPage').removeAttribute('disabled');
                    document.getElementById('prevPage').removeAttribute('disabled');

                    if (parseInt(document.getElementById('pageNumber').innerHTML) == (page + 1)) {
                        for (var i = 0; i < data.Items.length; i++) {
                            var itemCard = htmlToElement(atob(itemTemplate).format(thumbnailEndPoint.format(data.Items[i].AssetId), '', '', '', ''));
                            var addButton = document.createElement('button');
                            addButton.setAttribute('class', 'btn waves-effect waves-light');
                            addButton.setAttribute('style', 'width: 100%');
                            addButton.innerHTML = "Set Icon";
                            (function (id) {
                                addButton.onclick = function () {
                                    document.getElementById('cratePreviewIcon').src = thumbnailEndPoint.format(id);
                                };
                            })(data.Items[i].AssetId);
                            itemCard.children[1].appendChild(addButton);

                            var content = itemCard.children[1];
                            content.removeChild(content.children[2]);

                            document.getElementById('gifts').appendChild(itemCard);
                        }
                    }
                });
            }, 1000);
        }
        
        $(document).ready(function () {
            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
            $('.modal').modal();
            $('ul.tabs').tabs();

            /*var crates = [
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NDE0NTI2OTgiLCJ0aXRsZSI6InRoZSBmaXJzdCBjcmF0ZSIsInByaWNlIjoxMTQ4LCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTQ1MTIyMTMyOSIsIml0ZW1zIjpbeyJpZCI6IjM3NjUyNDQ4NyIsInRpY2tldHMiOjIwMDAwfSx7ImlkIjoiMzc2NTI2ODg4IiwidGlja2V0cyI6MjAwMDB9LHsiaWQiOiI0NTEyMjEzMjkiLCJ0aWNrZXRzIjo0MDAwMH0seyJpZCI6IjYzNjkwMDA4IiwidGlja2V0cyI6MTk5ODl9LHsiaWQiOiI0ODU0NTgwNiIsInRpY2tldHMiOjEwfV19',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTM4MjE5ODIzIiwidGl0bGUiOiJleiBwcm9maXQiLCJwcmljZSI6MTYzLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTM3NjUyNjY3MyIsIml0ZW1zIjpbeyJpZCI6IjM3NjUyNjY3MyIsInRpY2tldHMiOjMzMDAwfSx7ImlkIjoiMjE1NzE5NTk4IiwidGlja2V0cyI6MTIwMDB9LHsiaWQiOiIyMDY0MjAwOCIsInRpY2tldHMiOjE1MDAwfSx7ImlkIjoiMTA2NjkwMDQ1IiwidGlja2V0cyI6MTAwMDB9LHsiaWQiOiIzNzY1NDg3MzgiLCJ0aWNrZXRzIjozMDAwMH1dfQ==',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjMyMzUyMTAiLCJ0aXRsZSI6ImV6IGRvbWludXMiLCJwcmljZSI6MzE2ODUsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NTI3MzY1ODUyIiwiaXRlbXMiOlt7ImlkIjoiNTI3MzY1ODUyIiwidGlja2V0cyI6MjUwMDB9LHsiaWQiOiIxNjIzNzI4NDAiLCJ0aWNrZXRzIjozMDAwMH0seyJpZCI6IjEzNzQ1NTQ4IiwidGlja2V0cyI6NTAwMH0seyJpZCI6IjM3NjU0ODczOCIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiIxNjYzMDE0NyIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiIzNzY1MjY4ODgiLCJ0aWNrZXRzIjo1MDAwfSx7ImlkIjoiMzc2NTI0NDg3IiwidGlja2V0cyI6NTAwMH0seyJpZCI6IjI5OTUyODEwIiwidGlja2V0cyI6NTAwMH0seyJpZCI6IjQ1MTIyMTMyOSIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiIxNzg3NzM0MCIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiIxMzQ3NjkxNyIsInRpY2tldHMiOjUwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTk2NDU0ODkiLCJ0aXRsZSI6InJlZCBjcmF0ZSIsInByaWNlIjoxMjIsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTAyODYwNiIsIml0ZW1zIjpbeyJpZCI6IjQ4NDc0MzEzIiwidGlja2V0cyI6MzMwMDB9LHsiaWQiOiIxMDI4NjA2IiwidGlja2V0cyI6MjUwMDB9LHsiaWQiOiIzOTg2NzUxNzIiLCJ0aWNrZXRzIjoyNTAwMH0seyJpZCI6IjIyMTE3NTIzNiIsInRpY2tldHMiOjE3MDAwfV19', 'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTgxMjA2NzMzIiwidGl0bGUiOiI1MC81MCBwcm9maXQiLCJwcmljZSI6NDkwLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTE5Mzk4MjU4IiwiaXRlbXMiOlt7ImlkIjoiMzc2NTI2NjczIiwidGlja2V0cyI6NTAwMDB9LHsiaWQiOiIyMTU3MTk1OTgiLCJ0aWNrZXRzIjoyMDAwMH0seyJpZCI6IjE5Mzk4MjU4IiwidGlja2V0cyI6MzAwMDB9XX0=', 'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MzAyMjEzNjIyIiwidGl0bGUiOiJlenB6IGxpbWl0ZWQiLCJwcmljZSI6MjcxLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTkwNDUxODM0OCIsIml0ZW1zIjpbeyJpZCI6IjM3NjUyNjY3MyIsInRpY2tldHMiOjYwMDAwfSx7ImlkIjoiMTkzOTgyNTgiLCJ0aWNrZXRzIjoxMDAwMH0seyJpZCI6IjkwNDUxODM0OCIsInRpY2tldHMiOjEwMDAwfSx7ImlkIjoiMjI5NzAxMTQiLCJ0aWNrZXRzIjo1MDAwfSx7ImlkIjoiMzIxNTcwNTEyIiwidGlja2V0cyI6NTAwMH0seyJpZCI6IjU4MzI0NzUiLCJ0aWNrZXRzIjoxMDAwMH1dfQ==', 'eyJpbWciOiJodHRwczovL3Q0LnJieGNkbi5jb20vYTM5MjY0M2FiNGNmM2I1NTM5MzIwMGY4NWI2ZDBhMjMiLCJ0aXRsZSI6IndpbGwgeW91IHdpbiB0aGUgZG9taW51cz8iLCJwcmljZSI6MTI1NCwicHJldmlldyI6Imh0dHBzOi8vd3d3LnJvYmxveC5jb20vVGh1bWJzL0Fzc2V0LmFzaHg/d2lkdGg9NDIwJmhlaWdodD00MjAmYXNzZXRJZD01MjczNjU4NTIiLCJpdGVtcyI6W3siaWQiOiI1MjczNjU4NTIiLCJ0aWNrZXRzIjoxMDAwfSx7ImlkIjoiNjM2OTAwMDgiLCJ0aWNrZXRzIjo5OTAwMH1dfQ==', 'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTM3NjE2MTczIiwidGl0bGUiOiJGUm96ZW5DQXNlIiwicHJpY2UiOjY2LCJwcmV2aWV3IjoiaHR0cHM6Ly90NS5yYnhjZG4uY29tL2IyMDVkZmYyNTdkNzNlNjQ3ODU4YzYzYzkxM2I0YjUxIiwiaXRlbXMiOlt7ImlkIjoiMjcxMTI0MzgiLCJ0aWNrZXRzIjoyMDAwMH0seyJpZCI6IjEwNjY5MDA0NSIsInRpY2tldHMiOjEwMDAwfSx7ImlkIjoiMzc2NTI2NjczIiwidGlja2V0cyI6NDUwMDB9LHsiaWQiOiIxNjYzMDE0NyIsInRpY2tldHMiOjIwMDAwfSx7ImlkIjoiOTA0NTE4MzQ4IiwidGlja2V0cyI6NTAwMH1dfQ==',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjMwODM5ODgiLCJ0aXRsZSI6IjcwJSBQcm9maXQiLCJwcmljZSI6MTMsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MjcxMTI0MzgiLCJpdGVtcyI6W3siaWQiOiIyNzExMjQzOCIsInRpY2tldHMiOjcwMDAwfSx7ImlkIjoiMzc2NTI3MzUwIiwidGlja2V0cyI6MzAwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTI1ODk1NiIsInRpdGxlIjoiYm94IG8gYm9keSBwYXJ0cyIsInByaWNlIjoxMTMsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjE5NTMzNDk1IiwiaXRlbXMiOlt7ImlkIjoiMjcxMTI0MzgiLCJ0aWNrZXRzIjo2ODAwMH0seyJpZCI6IjEzOTU3NDQxOSIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiI2NTg4MzkwMjciLCJ0aWNrZXRzIjoyMDAwfSx7ImlkIjoiMzIzMzYzNjgiLCJ0aWNrZXRzIjo3MDAwfSx7ImlkIjoiNjE5NTMzNDk1IiwidGlja2V0cyI6NTAwMH0seyJpZCI6Ijc2MjE1ODAxIiwidGlja2V0cyI6MTMwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTgwNTMxMTk2IiwidGl0bGUiOiI1MCAvIDUwIiwicHJpY2UiOjI4NzQ2LCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTEzNjU3NjciLCJpdGVtcyI6W3siaWQiOiIxMzY1NzY3IiwidGlja2V0cyI6NTAwMDB9LHsiaWQiOiIzNzY1MjczNTAiLCJ0aWNrZXRzIjo1MDAwMH1dfQ==',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjE4NjIzMyIsInRpdGxlIjoiY2hlYXAgNTAgLyA1MCIsInByaWNlIjo1NzUsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTkzOTgyNTgiLCJpdGVtcyI6W3siaWQiOiIxOTM5ODI1OCIsInRpY2tldHMiOjUwMDAwfSx7ImlkIjoiMzc2NTI3MzUwIiwidGlja2V0cyI6NTAwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MzA0MzM1NjkxIiwidGl0bGUiOiJnb29kIHByb2ZpdCB3dGYiLCJwcmljZSI6MTM4LCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTEwNjY5MDA0NSIsIml0ZW1zIjpbeyJpZCI6IjEwNjY5MDA0NSIsInRpY2tldHMiOjgwMDAwfSx7ImlkIjoiMzc2NTQ4NzM4IiwidGlja2V0cyI6MjAwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTM3NjE2MTczIiwidGl0bGUiOiJGUm96ZW5DQXNlIDIuMCIsInByaWNlIjo0NTAsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTMyMzM2NyIsIml0ZW1zIjpbeyJpZCI6IjEzOTU3NDQxOSIsInRpY2tldHMiOjUwMDB9LHsiaWQiOiIxNjgxNDEzMDEiLCJ0aWNrZXRzIjoxNTAwMH0seyJpZCI6IjEwMTA3ODU1OSIsInRpY2tldHMiOjk1MDB9LHsiaWQiOiIxMzIzMzY3IiwidGlja2V0cyI6NTAwfSx7ImlkIjoiNDIyNjQ5NTMiLCJ0aWNrZXRzIjoyMDAwMH0seyJpZCI6IjMyNzMxODkzNSIsInRpY2tldHMiOjUwMDAwfV19',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MzQxMTU4NjUiLCJ0aXRsZSI6IkJsdWUgQ3JhdGUiLCJwcmljZSI6MjAzLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTQxNzQ1Nzg0NSIsIml0ZW1zIjpbeyJpZCI6IjQxNzQ1Nzg0NSIsInRpY2tldHMiOjUwMDAwfSx7ImlkIjoiMTY0NDgyNDA5IiwidGlja2V0cyI6MjAwMDB9LHsiaWQiOiIzNjU2MzI1OTciLCJ0aWNrZXRzIjoyMDAwMH0seyJpZCI6IjEzMDk5MTgiLCJ0aWNrZXRzIjoxMDAwMH1dfQ==',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTkwMDc2NDQ5IiwidGl0bGUiOiJjaGVhcCBmdW4gY2FzZSIsInByaWNlIjoyLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTEyMTk0NjM4NyIsIml0ZW1zIjpbeyJpZCI6IjE2NjMwMTQ3IiwidGlja2V0cyI6MTAwMH0seyJpZCI6IjM3NjU0ODczOCIsInRpY2tldHMiOjk5MDAwfV19',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjM2OTAwMDgiLCJ0aXRsZSI6IkJhY29uIEhhaXIiLCJwcmljZSI6MTA0LCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTYzNjkwMDA4IiwiaXRlbXMiOlt7ImlkIjoiNjM2OTAwMDgiLCJ0aWNrZXRzIjoxMDAwMDB9XX0=',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9OTQxMjIzNjYiLCJ0aXRsZSI6IldpdGNoIFdoaWNoIiwicHJpY2UiOjQ2OSwicHJldmlldyI6Imh0dHBzOi8vd3d3LnJvYmxveC5jb20vVGh1bWJzL0Fzc2V0LmFzaHg/d2lkdGg9NDIwJmhlaWdodD00MjAmYXNzZXRJZD0zMTM1NDQ1MjIiLCJpdGVtcyI6W3siaWQiOiIxMDcyNzg1MiIsInRpY2tldHMiOjE1MDAwfSx7ImlkIjoiMTMyODk3Mjc3IiwidGlja2V0cyI6MTUwMDB9LHsiaWQiOiIxMzMzNjA1NDIiLCJ0aWNrZXRzIjo1MDAwfSx7ImlkIjoiNTIwNzA1MyIsInRpY2tldHMiOjYwMDB9LHsiaWQiOiIzMTM1NDQ1MjIiLCJ0aWNrZXRzIjoxMDAwMH0seyJpZCI6IjMxMzU0NzA4NyIsInRpY2tldHMiOjEyMDAwfSx7ImlkIjoiMzEzNTQ1NDg1IiwidGlja2V0cyI6MTcwMDB9LHsiaWQiOiIzNzY1MjY4ODgiLCJ0aWNrZXRzIjoyMDAwMH1dfQ==',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTkzNDU3NTgiLCJ0aXRsZSI6ImJsdWUgY3JhdGUiLCJwcmljZSI6MTAzLCJwcmV2aWV3IjoiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9UaHVtYnMvQXNzZXQuYXNoeD93aWR0aD00MjAmaGVpZ2h0PTQyMCZhc3NldElkPTQxNzQ1Nzg0NSIsIml0ZW1zIjpbeyJpZCI6IjQxNzQ1Nzg0NSIsInRpY2tldHMiOjIwMDAwfSx7ImlkIjoiNDUxMjIxMzI5IiwidGlja2V0cyI6NDIwMDB9LHsiaWQiOiIxMDEzMDk3OSIsInRpY2tldHMiOjIwMDAwfSx7ImlkIjoiMTQ1MzEwNjM1IiwidGlja2V0cyI6MTAwMDB9LHsiaWQiOiIzNjU2MzIwNTIiLCJ0aWNrZXRzIjo4MDAwfV19',
                'eyJpbWciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9NjY4OTcxNDIiLCJ0aXRsZSI6Im9wZW4gdW5sZXNzIHVyIGEgbm9vYiIsInByaWNlIjo0MDQsInByZXZpZXciOiJodHRwczovL3d3dy5yb2Jsb3guY29tL1RodW1icy9Bc3NldC5hc2h4P3dpZHRoPTQyMCZoZWlnaHQ9NDIwJmFzc2V0SWQ9MTAwNjA1MjUiLCJpdGVtcyI6W3siaWQiOiIzNzY1MjY2NzMiLCJ0aWNrZXRzIjoxOTAwMH0seyJpZCI6IjI4Mjc4NTI5IiwidGlja2V0cyI6MjAwMH0seyJpZCI6IjEwODMxNDU0IiwidGlja2V0cyI6NjAwMH0seyJpZCI6IjE1NjM3NjEyIiwidGlja2V0cyI6NzAwMH0seyJpZCI6IjM3NjUzMjM4NCIsInRpY2tldHMiOjE1MDAwfSx7ImlkIjoiMzc2NTQ4MTA3IiwidGlja2V0cyI6MTMwMDB9LHsiaWQiOiIxMDA2MDUyNSIsInRpY2tldHMiOjEyMDAwfSx7ImlkIjoiMTI4NjQwNDUiLCJ0aWNrZXRzIjoyNjAwMH1dfQ=='
            ];

            crates = shuffle(crates);

            for (var i = 0; i < crates.length; i++) {
                var c = JSON.parse(atob(crates[i]));
                displayCard(c.items, c.img, c.title, c.price, c.preview);
            }*/

            getCrates(0);
            
            $('#winningNumbersCheckbox').on('change', function () {
                var c = this.checked;
                if (c)
                    $(".winning-numbers").show(100);
                else
                    $(".winning-numbers").hide(100);
            });

            $("#caseName").on("keyup", function (e) {
                $("#cratePreviewName").html($(this).val());
            });

            $("#catalogSearch").on("keyup", function (e) {
                var query = $(this).val();
                if (typeof (searchTimeout) != 'undefined')
                    clearTimeout(searchTimeout);

                searchTimeout = setTimeout(function () {
                    proxy(searchEndPoint.format(encodeURIComponent(query)), function (data) {
                        if (query == $("#catalogSearch").val()) {
                            document.getElementById('catalogDiv').innerHTML = "";
                            for (var i = 0; i < data.length; i++) {
                                var itemCard = htmlToElement(atob(itemTemplate).format('https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png', 'Loading', 'Loading...', '', ''));
                                var addButton = document.createElement('button');
                                addButton.setAttribute('class', 'btn waves-effect waves-light');
                                addButton.setAttribute('style', 'width: 100%');
                                addButton.innerHTML = "Add";
                                (function (id) {
                                    addButton.onclick = function () {
                                        var itemCard = htmlToElement(atob(creaTemplate).format('https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading.png', 'Loading', 'Loading...', '', ''));
                                        (function (itemCard) {
                                            getItem(id, function (listing) {
                                                itemCard.innerHTML = htmlToElement(atob(creaTemplate).format(removeTags(listing.img), removeTags(listing.name), getValue(listing.price), '', overlays[listing.overlay])).innerHTML;
                                            });
                                        })(itemCard);
                                        itemCard.id = id;
                                        document.getElementById('creatorDiv').appendChild(itemCard);
                                    };
                                })(data[i].AssetId);
                                itemCard.children[1].appendChild(addButton);

                                (function (itemCard, id, addButton) {
                                    getItem(id, function (listing) {
                                        if (itemCard != null) {
                                            itemCard.innerHTML = htmlToElement(atob(itemTemplate).format(removeTags(listing.img), removeTags(listing.name), getValue(listing.price), '', overlays[listing.overlay])).innerHTML;
                                            itemCard.children[1].appendChild(addButton);
                                        }
                                    });
                                })(itemCard, data[i].AssetId, addButton);

                                document.getElementById('catalogDiv').appendChild(itemCard);
                            }
                        }
                    });
                }, 1000);
            });

            setGiftsPage(0, 1);
            $("#catalogSearch").keyup();
            $(".button-collapse").sideNav();

            var beep = new Audio('https://raw.githubusercontent.com/Cryption/rblx.fun/master/beep.wav');
            //setInterval(recalculateCratePrice, 150);
            setInterval(function () {
                document.getElementById('nav-robux-amount').innerHTML = lastRobux.toLocaleString();
                if (lastRobux != robuxAmount) {
                    beep.currentTime = 0;
                    beep.play();
                }
                lastRobux += Math.round((robuxAmount - lastRobux) * .6);
            }, 50);

            if (getParameterByName('referral') != '') {
                localStorage.setItem('referral', getParameterByName('referral'));
            }
        });
        
        $("#signup_pass").on("focusout", function (e) {
            if ($(this).val() != $("#signup_confirmpass").val()) {
                $("#signup_confirmpass").removeClass("valid").addClass("invalid");
            } else {
                $("#signup_confirmpass").removeClass("invalid").addClass("valid");
            }
        });

        $("#signup_confirmpass").on("keyup", function (e) {
            if ($("#signup_pass").val() != $(this).val()) {
                $(this).removeClass("valid").addClass("invalid");
            } else {
                $(this).removeClass("invalid").addClass("valid");
            }
        });

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.href);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        function signin(user, pass) {
            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/Login",
                data: JSON.stringify({ user: user, pass: pass }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var response = JSON.parse(msg.d);
                    if (typeof (response["error"]) != 'undefined') {
                        toastr.error(response["error"]);
                    } else {
                        localStorage.setItem('token', response.token);

                        $("[href='#signin']").hide();
                        $(".user-info").show(250);
                        $("#nav-username").text(response.user);
                        $("#signin").modal('close');

                        robuxAmount = response.balance;
                        lastRobux = response.balance;

                        userInventory = response.inventory;

                        for (var i = 0; i < userInventory.length; i++) {
                            addInventoryItem(userInventory[i].id, userInventory[i].price);
                        }

                        signedIn = true;
                    }
                },
                error: function () {
                    toastr.error("An error occured while processing this action, please try again later");
                }
            });
        }

        function signup(user, pass, secondPass) {
            if (pass != secondPass) {
                toastr.error("Passwords must match!");
                return;
            }

            if (!document.getElementById('over18').checked) {
                toastr.error("You must be over 18 to play on this site!");
                return;
            }

            if (!document.getElementById('tos').checked) {
                toastr.error("You agree to the terms of service play on this site!");
                return;
            }

            $.ajax({
                type: "POST",
                url: "//api.rblx.fun/Default.aspx/Register",
                data: JSON.stringify({ user: user, pass: pass, referral: typeof (localStorage.referral) == 'undefined' ? '' : localStorage.referral }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var response = JSON.parse(msg.d);
                    if (typeof (response["error"]) != 'undefined') {
                        toastr.error(response["error"]);
                    } else {
                        localStorage.setItem('token', response.token);

                        $("[href='#signin']").hide();
                        $(".user-info").show(250);
                        $("#nav-username").text(response.user);
                        $("#signin").modal('close');

                        robuxAmount = response.balance;
                        lastRobux = response.balance;

                        userInventory = response.inventory;

                        for (var i = 0; i < userInventory.length; i++) {
                            addInventoryItem(userInventory[i].id, userInventory[i].price);
                        }

                        signedIn = true;
                    }
                },
                error: function () {
                    toastr.error("An error occured while processing this action, please try again later");
                }
            });
        }
    </script>
</head>
<body>
    <div class="navbar-fixed">
        <nav class="light-blue lighten-1" role="navigation">
            <div class="nav-wrapper container">
                <a id="logo-container" href="#" class="brand-logo"><img src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/logo.png" style="padding-top: 4px; height: 60px;" /></a>
                <ul class="right hide-on-med-and-down">
                    <li><a href="#crate-creator" class="modal-trigger">Crate Creator</a></li>
                    <li><a href="#deposit" class="modal-trigger">Deposit</a></li>
                    <li><a href="javascript:openInventory();">Inventory</a></li>
                    <a href="#signin" class="btn waves-effect waves-light orange modal-trigger">Sign In</a>
                    <li class="user-info" style="display: none;">
                        <span id="nav-username"></span>
                        <img style="max-height: 28px; transform: translateY(10px); padding-left: 15px" src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/funds.png" />
                        <span id="nav-robux-amount" style="font-weight: 500;"></span>
                    </li>
                </ul>

                <ul id="nav-mobile" class="side-nav" style="transform: translateX(-100%);">
                    <li><a href="#crate-creator" class="modal-trigger">Crate Creator</a></li>
                    <li><a href="#deposit" class="modal-trigger">Deposit</a></li>
                    <li><a href="javascript:openInventory();">Inventory</a></li>
                    <a href="#signin" class="btn waves-effect waves-light orange modal-trigger">Sign In</a>
                </ul>
                <a href="#nav-mobile" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
            </div>
        </nav>
    </div>

    <div id="signin" class="modal" style="max-width: 384px">
        <div class="modal-header">
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s6"><a class="active" href="#sign-in">Sign In</a></li>
                        <li class="tab col s6"><a href="#sign-up">Sign Up</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="sign-in">
            <div class="modal-content">
                <h4>Sign In</h4>

                <div class="row">
                    <form class="col s12">
                        <div class="row modal-form-row">
                            <div class="input-field col s12">
                                <input id="signin_user" type="text" class="validate">
                                <label for="signin_user">Username</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input id="signin_pass" type="password" class="validate">
                                <label for="signin_pass">Password</label>
                            </div>
                        </div>
                        <div class="row">
                            <p>
                                <input type="checkbox" class="filled-in" id="rememberMe" />
                                <label for="rememberMe">Remember me</label>
                            </p>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <a class="btn waves-effect waves-light orange" onclick="signin(document.getElementById('signin_user').value, document.getElementById('signin_pass').value);">Sign In</a>
            </div>
        </div>
        <div id="sign-up">
            <div class="modal-content">
                <h4>Sign Up</h4>

                <div class="row">
                    <form class="col s12">
                        <div class="row modal-form-row">
                            <div class="input-field col s12">
                                <input id="signup_user" type="text" class="validate">
                                <label for="signup_user">Username</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input id="signup_pass" type="password" class="validate">
                                <label for="signup_pass">Password</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input id="signup_confirmpass" type="password">
                                <label for="signup_confirmpass" data-error="Password not match" data-success="Password Match">Password (Confirm)</label>
                            </div>
                        </div>
                        <div class="row">
                            <p>
                                <input type="checkbox" class="filled-in" id="over18" />
                                <label for="over18">I am over 18</label>
                            </p>
                        </div>
                        <div class="row">
                            <p>
                                <input type="checkbox" class="filled-in" id="tos" />
                                <label for="tos">I agree to the <a href="http://kazok.men/">terms and conditions</a></label>
                            </p>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <a class="btn waves-effect waves-light orange" onclick="signup(document.getElementById('signup_user').value, document.getElementById('signup_pass').value, document.getElementById('signup_confirmpass').value);">Sign Up</a>
            </div>
        </div>
    </div>

    <div id="deposit" class="modal">
        <div class="modal-content">
            <div class="row">
                <h4>Add Funds</h4>
            </div>
            <div class="row">
                <form class="col s12">
                    <div class="row modal-form-row">
                        <div class="input-field col s12">
                            <i class="prefix"><img style="max-height: 20px;" src="//rbx.place/img/funds.png" /></i>
                            <input id="funds" type="number" min="400" max="24000" class="validate">
                            <label for="funds">Amount of Funds</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="row">
                <a class="modal-action modal-close btn waves-effect waves-light orange" disabled="disabled">Deposit Items</a>
                <a class="modal-action modal-close btn waves-effect waves-light orange" disabled="disabled">Pay With <img style="max-height: 20px; transform:translateY(5px);" src="//rbx.place/img/funds.png" /></a>
                <a class="modal-action modal-close btn waves-effect waves-light green">Pay With Cash</a>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        </div>
    </div>

    <div id="crate-creator" class="modal">
        <div class="modal-content">
            <div class="row">
                <h4>Create Your Own Crate</h4>
            </div>
            <div class="row">
                <div class="col s4">
                    <span id="prevPage" class="waves-effect waves-green btn left" onclick="setGiftsPage(parseInt(document.getElementById('pageNumber').innerHTML) - 2, 1)">Prev Page</span>
                </div>
                <div class="col s4 center">
                    Page <span id="pageNumber">1</span>
                </div>
                <div class="col s4">
                    <span id="nextPage" class="waves-effect waves-green btn right" onclick="setGiftsPage(parseInt(document.getElementById('pageNumber').innerHTML), 2)">Next Page</span>
                </div>
                <div class="col s12">
                    <div class="case-items" id="gifts" style="min-height: 380px">

                    </div>
                </div>
            </div>
            <div class="row">
                <form class="col s12">
                    <div class="row modal-form-row">
                        <div class="input-field col s12">
                            <input id="caseName" type="text" class="validate">
                            <label for="caseName">Case Name</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="row">
                <p>Catalog</p>
                <div class="row modal-form-row">
                    <div class="input-field col s12">
                        <input id="catalogSearch" type="text">
                        <label for="catalogSearch">Search</label>
                    </div>
                </div>
                <div class="case-items" id="catalogDiv">

                </div>
            </div>
            <div class="row">
                <p>Crate Items</p>
                <div class="user-items" id="creatorDiv">

                </div>
                <p><span class="grey-text">Sum of Odds:</span> <span id="oddsSum">0</span>%</p>
                <p><span class="grey-text">Price:</span> 
                    <span class="green-text">
                        <img style="max-height: 20px;" src="//rbx.place/img/funds.png" />
                        <span id="calculatedPrice">Free</span>
                    </span>
                </p>
            </div>
            <div class="row">
                <p>Preview</p>
                <div class="card item">
                    <div class="card-image">
                        <img src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/loading-gift.png" id="cratePreviewIcon">
                        <span class="crate-preview"><img src="https://t5.rbxcdn.com/b205dff257d73e647858c63c913b4b51" id="cratePreviewPreview"></span>
                    </div>
                    <div class="card-content">
                        <span class="card-title" id="cratePreviewName">Example Crate</span>
                        <div class="col s6">
                            <span class="grey-text">
                                Price
                            </span>
                        </div>
                        <div class="col s6">
                            <span class="green-text align-price">
                                <img style="max-height: 20px;" src="//rbx.place/img/funds.png" />
                                <span id="cratePreviewPrice">Free</span>
                            </span>
                        </div>
                    </div>
                    <div class="card-action">
                        <span class="btn waves-effect waves-light green" disabled="disabled">OPEN CRATE</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a> <a class="btn waves-effect waves-light green" onclick="createCrate();">Create Crate</a>
        </div>
    </div>

    <div id="inventory" class="modal">
        <div class="modal-content">
            <div class="row">
                <div class="col s4 left">
                    <span class="waves-effect waves-green btn" disabled="disabled">Withdraw All</span>
                </div>
                <div class="col s4 center">
                    <h4>Inventory</h4>
                </div>
                <div class="col s4 right">
                    <span class="waves-effect waves-green btn right green" onclick="convertAllToRobux();">
                        Convert All To
                        <img style="max-height: 25px; transform: translateY(6px);" src="https://raw.githubusercontent.com/Cryption/rblx.fun/master/images/funds.png" />
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="user-items" id="inventoryDiv">

                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        </div>
    </div>

    <div id="open-crate" class="modal">
        <div class="modal-content">
            <div class="row">
                <div class="col s4 left">
                    <span onclick="testSpin();" class="waves-effect waves-green btn">Free Test Spin</span>
                </div>
                <div class="col s4 center">
                    <h4 id="crateTitle"></h4>
                </div>
                <div class="col s4 right">
                    <span class="green-text align-price right">
                        <img style="max-height: 20px;" src="//rbx.place/img/funds.png" />
                        <p id="cratePrice"></p>
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="spin-open">
                    <div class="divider"></div>
                    <div class="spin-overlay"></div>
                    <div class="spin-items" id="spinFrame">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col s6 left">
                    <h4>Items in the crate:</h4>
                    <p>
                        <input type="checkbox" class="filled-in" id="winningNumbersCheckbox" />
                        <label for="winningNumbersCheckbox">Show winning numbers</label>
                    </p>
                </div>
                <div class="col s6 right">
                    <span class="waves-effect waves-green btn right green" onclick="openCrate();">Open This Crate</span>
                </div>
            </div>
            <div class="row">
                <div class="case-items" id="caseInventory">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        </div>
    </div>

    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <br><br>
            <h1 class="header center orange-text">Welcome to <a href="https://rblx.fun">RBLX.Fun</a></h1>
            <div class="row center">
                <h5 class="header col s12 light"><a href="https://rblx.fun">RBLX.Fun</a> is a crate opening site where you can play and win items. Sign up to begin opening crates and win the items of your dreams</h5>
            </div>
            <div class="row center">
                <a href="#signin" id="discord-button" class="btn-large waves-effect waves-light orange modal-trigger" onclick="$('[href=\'#sign-in\']').click()">SIGN IN</a>
                <a target="_blank" href="https://discord.gg/UjVkpkF" id="discord-button" class="btn-large waves-effect waves-light purple"><i class="left material-icons">chat</i>DISCORD</a>
                <a href="#signin" id="discord-button" class="btn-large waves-effect waves-light orange modal-trigger" onclick="$('[href=\'#sign-up\']').click()">SIGN UP</a>
            </div>
            <br><br>
            <div class="row center" id="crates">
            </div>
        </div>
    </div>

    <footer class="page-footer orange">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">About</h5>
                    <p class="grey-text text-lighten-4">We are a crate opening site where you can play and win items. Sign up to begin opening crates and win the items of your dreams</p>
                </div>
                <div class="col l6 s12">
                    <h5 class="white-text">Links</h5>
                    <ul>
                        <li><a class="white-text" href="#!">Link 1</a></li>
                        <li><a class="white-text" href="#!">Link 2</a></li>
                        <li><a class="white-text" href="#!">Link 3</a></li>
                        <li><a class="white-text" href="#!">Link 4</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Made by doctor
            </div>
        </div>
    </footer>
</body>
</html>
